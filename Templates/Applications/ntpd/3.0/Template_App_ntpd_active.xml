<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>3.0</version>
  <date>2017-05-26T11:19:17Z</date>
  <groups>
    <group>
      <name>App templates</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>Template App ntpd Client active</template>
      <name>Template App ntpd Client active</name>
      <description/>
      <groups>
        <group>
          <name>App templates</name>
        </group>
      </groups>
      <applications/>
      <items/>
      <discovery_rules>
        <discovery_rule>
          <name>NTP servers</name>
          <type>7</type>
          <snmp_community/>
          <snmp_oid/>
          <key>rabe.ntpd.server.discovery</key>
          <delay>3600</delay>
          <status>0</status>
          <allowed_hosts/>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <filter>
            <evaltype>0</evaltype>
            <formula/>
            <conditions/>
          </filter>
          <lifetime>90</lifetime>
          <description/>
          <item_prototypes>
            <item_prototype>
              <name>NTP server {#SERVERNAME} candidate order</name>
              <type>7</type>
              <snmp_community/>
              <multiplier>0</multiplier>
              <snmp_oid/>
              <key>rabe.ntpd.server.candidate_order[{#SERVERNAME}]</key>
              <delay>300</delay>
              <history>90</history>
              <trends>365</trends>
              <status>0</status>
              <value_type>3</value_type>
              <allowed_hosts/>
              <units/>
              <delta>0</delta>
              <snmpv3_contextname/>
              <snmpv3_securityname/>
              <snmpv3_securitylevel>0</snmpv3_securitylevel>
              <snmpv3_authprotocol>0</snmpv3_authprotocol>
              <snmpv3_authpassphrase/>
              <snmpv3_privprotocol>0</snmpv3_privprotocol>
              <snmpv3_privpassphrase/>
              <formula>1</formula>
              <delay_flex/>
              <params/>
              <ipmi_sensor/>
              <data_type>0</data_type>
              <authtype>0</authtype>
              <username/>
              <password/>
              <publickey/>
              <privatekey/>
              <port/>
              <description/>
              <inventory_link>0</inventory_link>
              <applications>
                <application>
                  <name>ntpd</name>
                </application>
              </applications>
              <valuemap/>
              <logtimefmt/>
              <application_prototypes/>
            </item_prototype>
            <item_prototype>
              <name>NTP server {#SERVERNAME} configuration</name>
              <type>7</type>
              <snmp_community/>
              <multiplier>0</multiplier>
              <snmp_oid/>
              <key>vfs.file.regexp[/etc/ntp.conf,&quot;^server.*{#SERVERNAME} (.*)&quot;,,,,\1]</key>
              <delay>3600</delay>
              <history>90</history>
              <trends>0</trends>
              <status>0</status>
              <value_type>4</value_type>
              <allowed_hosts/>
              <units/>
              <delta>0</delta>
              <snmpv3_contextname/>
              <snmpv3_securityname/>
              <snmpv3_securitylevel>0</snmpv3_securitylevel>
              <snmpv3_authprotocol>0</snmpv3_authprotocol>
              <snmpv3_authpassphrase/>
              <snmpv3_privprotocol>0</snmpv3_privprotocol>
              <snmpv3_privpassphrase/>
              <formula>1</formula>
              <delay_flex/>
              <params/>
              <ipmi_sensor/>
              <data_type>0</data_type>
              <authtype>0</authtype>
              <username/>
              <password/>
              <publickey/>
              <privatekey/>
              <port/>
              <description/>
              <inventory_link>0</inventory_link>
              <applications>
                <application>
                  <name>ntpd</name>
                </application>
              </applications>
              <valuemap/>
              <logtimefmt/>
              <application_prototypes/>
            </item_prototype>
          </item_prototypes>
          <trigger_prototypes>
            <trigger_prototype>
              <expression>{Template App ntpd Client active:rabe.ntpd.server.candidate_order[{#SERVERNAME}].last()}=0</expression>
              <name>NTP server {#SERVERNAME} is not a valid candidate on {HOST.NAME}</name>
              <url/>
              <status>0</status>
              <priority>2</priority>
              <description>If a configured server has a candidate order of 0 it is not considered as a valid time source and most likely has some issues.</description>
              <type>0</type>
              <dependencies/>
            </trigger_prototype>
          </trigger_prototypes>
          <graph_prototypes/>
          <host_prototypes/>
        </discovery_rule>
      </discovery_rules>
      <macros/>
      <templates>
        <template>
          <name>Template App ntpd Common active</name>
        </template>
      </templates>
      <screens/>
    </template>
    <template>
      <template>Template App ntpd Common active</template>
      <name>Template App ntpd Common active</name>
      <description/>
      <groups>
        <group>
          <name>App templates</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>ntpd</name>
        </application>
      </applications>
      <items>
        <item>
          <name>Memory usage ($5) of &quot;$1&quot; processes</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>proc.mem[ntpd,ntp,,,rss]</key>
          <delay>300</delay>
          <history>7</history>
          <trends>60</trends>
          <status>0</status>
          <value_type>3</value_type>
          <allowed_hosts/>
          <units>B</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>Number of &quot;$1&quot; processes</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>proc.num[ntpd,ntp]</key>
          <delay>300</delay>
          <history>7</history>
          <trends>60</trends>
          <status>0</status>
          <value_type>3</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[authdelay,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>s</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[broadcastdelay,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>s</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[jitter,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>s</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[precision]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[root dispersion,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>s</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[root distance,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>s</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[stability,single]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>0</value_type>
          <allowed_hosts/>
          <units>ppm</units>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[stratum]</key>
          <delay>3600</delay>
          <history>90</history>
          <trends>365</trends>
          <status>0</status>
          <value_type>3</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[system flags]</key>
          <delay>3600</delay>
          <history>90</history>
          <trends>0</trends>
          <status>0</status>
          <value_type>4</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[system peer mode]</key>
          <delay>3600</delay>
          <history>90</history>
          <trends>0</trends>
          <status>0</status>
          <value_type>4</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
        <item>
          <name>ntpd $1</name>
          <type>7</type>
          <snmp_community/>
          <multiplier>0</multiplier>
          <snmp_oid/>
          <key>rabe.ntpdc.sysinfo[system peer]</key>
          <delay>300</delay>
          <history>90</history>
          <trends>0</trends>
          <status>0</status>
          <value_type>4</value_type>
          <allowed_hosts/>
          <units/>
          <delta>0</delta>
          <snmpv3_contextname/>
          <snmpv3_securityname/>
          <snmpv3_securitylevel>0</snmpv3_securitylevel>
          <snmpv3_authprotocol>0</snmpv3_authprotocol>
          <snmpv3_authpassphrase/>
          <snmpv3_privprotocol>0</snmpv3_privprotocol>
          <snmpv3_privpassphrase/>
          <formula>1</formula>
          <delay_flex/>
          <params/>
          <ipmi_sensor/>
          <data_type>0</data_type>
          <authtype>0</authtype>
          <username/>
          <password/>
          <publickey/>
          <privatekey/>
          <port/>
          <description/>
          <inventory_link>0</inventory_link>
          <applications>
            <application>
              <name>ntpd</name>
            </application>
          </applications>
          <valuemap/>
          <logtimefmt/>
        </item>
      </items>
      <discovery_rules/>
      <macros/>
      <templates/>
      <screens/>
    </template>
    <template>
      <template>Template App ntpd Server active</template>
      <name>Template App ntpd Server active</name>
      <description/>
      <groups>
        <group>
          <name>App templates</name>
        </group>
      </groups>
      <applications/>
      <items/>
      <discovery_rules/>
      <macros/>
      <templates>
        <template>
          <name>Template App ntpd Common active</name>
        </template>
      </templates>
      <screens/>
    </template>
  </templates>
  <triggers>
    <trigger>
      <expression>{Template App ntpd Common active:proc.num[ntpd,ntp].max(#5)}&lt;1</expression>
      <name>No running ntpd processes on {HOST.NAME}</name>
      <url>https://intranet.rabe.ch/mediawiki/index.php/NTP#Fehlerdiagnose</url>
      <status>0</status>
      <priority>4</priority>
      <description>We expect ntpd to run at all times</description>
      <type>0</type>
      <dependencies/>
    </trigger>
    <trigger>
      <expression>{Template App ntpd Common active:rabe.ntpdc.sysinfo[system peer mode].regexp(client)}&lt;&gt;0</expression>
      <name>ntpd system peer mode is not client on host {HOST.NAME}</name>
      <url/>
      <status>0</status>
      <priority>2</priority>
      <description>Our clients should always be in client peer mode. If they are not, chances are that they are not clients any more.</description>
      <type>0</type>
      <dependencies/>
    </trigger>
  </triggers>
</zabbix_export>
