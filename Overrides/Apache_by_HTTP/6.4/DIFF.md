# Compare Rabe Override with Upstream Template

Original: [Apache by HTTP](https://raw.githubusercontent.com/zabbix/zabbix/release/6.4/templates/app/apache_http/template_app_apache_http.yaml)

## Diff

```diff
--- before
+++ after
@@ -14,6 +14,13 @@
         You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384764-discussion-thread-for-official-zabbix-template-apache
         
         Generated by official Zabbix template tool "Templator"
+        
+        ## Changes
+        
+        These changes are part of [RaBe's Zabbix template and helpers
+        collection](https://github.com/radiorabe/rabe-zabbix).
+        
+        * Added `{$APACHE.STATUS.HOST}` instead of `{HOST.NAME}` for agentless use
       vendor:
         name: Zabbix
         version: 6.4-0
@@ -52,7 +59,6 @@
           description: |
             It is calculated as a rate of change for total bytes statistics.
             `BytesPerSec` is not used, as it counts the average since the last Apache server start.
-            
           preprocessing:
             - type: JSONPATH
               parameters:
@@ -117,7 +123,7 @@
                   };
                   
                   return JSON.stringify(output);
-          url: '{$APACHE.STATUS.SCHEME}://{HOST.CONN}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}'
+          url: '{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}'
           retrieve_mode: BOTH
           tags:
             - tag: component
@@ -132,7 +138,7 @@
               manual_close: 'YES'
               dependencies:
                 - name: 'Apache: Service is down'
-                  expression: 'last(/Apache by HTTP/net.tcp.service[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"])=0'
+                  expression: 'last(/Apache by HTTP/net.tcp.service[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"])=0'
               tags:
                 - tag: scope
                   value: availability
@@ -445,7 +451,7 @@
         - uuid: 5039d11bc3964d6e9928a0a46dd0b402
           name: 'Apache: Service response time'
           type: SIMPLE
-          key: 'net.tcp.service.perf[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"]'
+          key: 'net.tcp.service.perf[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"]'
           history: 7d
           value_type: FLOAT
           units: s
@@ -456,21 +462,21 @@
               value: health
           triggers:
             - uuid: ffbb564032c7462eb0bb9b4c2f700559
-              expression: 'min(/Apache by HTTP/net.tcp.service.perf[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"],5m)>{$APACHE.RESPONSE_TIME.MAX.WARN}'
+              expression: 'min(/Apache by HTTP/net.tcp.service.perf[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"],5m)>{$APACHE.RESPONSE_TIME.MAX.WARN}'
               name: 'Apache: Service response time is too high'
               event_name: 'Apache: Service response time is too high (over {$APACHE.RESPONSE_TIME.MAX.WARN}s for 5m)'
               priority: WARNING
               manual_close: 'YES'
               dependencies:
                 - name: 'Apache: Service is down'
-                  expression: 'last(/Apache by HTTP/net.tcp.service[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"])=0'
+                  expression: 'last(/Apache by HTTP/net.tcp.service[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"])=0'
               tags:
                 - tag: scope
                   value: performance
         - uuid: fb65918695094026838e2b9e4ca00402
           name: 'Apache: Service ping'
           type: SIMPLE
-          key: 'net.tcp.service[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"]'
+          key: 'net.tcp.service[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"]'
           history: 7d
           valuemap:
             name: 'Service state'
@@ -485,7 +491,7 @@
               value: health
           triggers:
             - uuid: afe2fde35d054333adc8369a0f9af778
-              expression: 'last(/Apache by HTTP/net.tcp.service[http,"{HOST.CONN}","{$APACHE.STATUS.PORT}"])=0'
+              expression: 'last(/Apache by HTTP/net.tcp.service[http,"{$APACHE.STATUS.HOST}","{$APACHE.STATUS.PORT}"])=0'
               name: 'Apache: Service is down'
               priority: AVERAGE
               manual_close: 'YES'
@@ -652,6 +658,9 @@
         - macro: '{$APACHE.RESPONSE_TIME.MAX.WARN}'
           value: '10'
           description: 'The maximum Apache response time expressed in seconds for a trigger expression.'
+        - macro: '{$APACHE.STATUS.HOST}'
+          value: 127.0.0.1
+          description: 'Hostname or IP of Apache HTTP server'
         - macro: '{$APACHE.STATUS.PATH}'
           value: 'server-status?auto'
           description: 'The URL path.'


```
